CREATE DATABASE ORG123;
SHOW DATABASES;
USE ORG123;

CREATE TABLE Worker (
	WORKER_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	FIRST_NAME CHAR(25) NOT NULL,
	LAST_NAME CHAR(25) NOT NULL,
	SALARY INT(15) NOT NULL,
	JOINING_DATE DATETIME,
	DEPARTMENT CHAR(25) NOT NULL,
    USERNAME CHAR(25) NOT NULL,
    AGE INT NOT NULL
);

INSERT INTO Worker 
	(WORKER_ID, FIRST_NAME, LAST_NAME, SALARY, JOINING_DATE, DEPARTMENT, USERNAME, AGE) VALUES
		(001, 'Monika', 'Arora', 100000, '14-02-20 09.00.00', 'HR','MONI12',27),
		(002, 'Niharika', 'Verma', 80000, '14-06-11 09.00.00', 'Admin','NIHA13',22),
		(003, 'Vishal', 'Singhal', 300000, '14-02-20 09.00.00', 'HR','VISH16',23),
		(004, 'Amitabh', 'Singh', 500000, '14-02-20 09.00.00', 'Admin','AMI18',29),
		(005, 'Vivek', 'Bhati', 500000, '14-06-11 09.00.00', 'Admin','AMI18',28),
		(006, 'Vipul', 'Diwan', 200000, '14-06-11 09.00.00', 'Account','VIPU19',34),
		(007, 'Satish', 'Kumar', 75000, '14-01-20 09.00.00', 'Account','VIPU19',25),
		(008, 'Geetika', 'Chauhan', 90000, '14-04-11 09.00.00', 'Admin','GEETU20',26);
        SELECT * FROM WORKER;
        
UPDATE Worker SET USERNAME = 'AMI19' WHERE WORKER_ID = 5;
UPDATE Worker SET USERNAME = 'Sati23' WHERE WORKER_ID = 7;
ALTER TABLE Worker
ADD CONSTRAINT uq_username UNIQUE (USERNAME);
ALTER TABLE Worker DROP INDEX uq_username;

#check contraints
ALTER TABLE Worker
ADD CONSTRAINT chk_age CHECK (AGE > 20 and AGE<130);
INSERT INTO WORKER VALUES(009, 'prena', 'Chauhan', 90000, '14-04-11 09.00.00', 'Admin','GEETU20',15);
desc  worker;
ALTER TABLE Worker
DROP CHECK chk_age;

#primary key
ALTER TABLE Worker
ADD CONSTRAINT pk_worker PRIMARY KEY(WORKER_ID);
ALTER TABLE Worker
DROP PRIMARY KEY;
desc worker;

# foriegn key
CREATE TABLE DEPARTMENT (
	DEPARTMENT_iD INT PRIMARY KEY,
    DEPARTMENT_NAME CHAR(25) NOT NULL,
    DEPARTMENT_MANAGER CHAR(255) NOT NULL
    ); 
    ALTER TABLE Worker
ADD COLUMN DEPARTMENT_ID INT;

ALTER TABLE Worker
ADD CONSTRAINT fk_worker_dept
FOREIGN KEY (DEPARTMENT_ID) REFERENCES Department(DEPARTMENT_ID);

INSERT INTO DEPARTMENT (DEPARTMENT_iD ,DEPARTMENT_NAME,DEPARTMENT_MANAGER )VALUES(1011, 'IT','Manohar'),(1012,'Finance','Keerthana'),(1013,'ECE','Rashi'),(1014,'Marketing','Kamaal');
SELECT*FROM WORKER;
UPDATE Worker SET DEPARTMENT_iD  = '1014' WHERE WORKER_ID = 8;

ALTER TABLE Worker
MODIFY DEPARTMENT_ID INT NOT NULL;
SELECT*FROM DEPARTMENT;
INSERT INTO WORKER VALUES(005, 'Amitabh', 'Singh', 500000, '14-02-20 09.00.00', 'Admin','AMI18',29,NULL);
 #NOT ACCEPTED AS DEPARTMENT CANNOT BE NULL